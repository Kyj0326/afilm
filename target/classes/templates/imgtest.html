<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Main Page</title>
</head>
<body>
<form th:action="@{/board/item/new/pro}" method="post" enctype="multipart/form-data">
    <div class="row g-3">
        <hr/>
        <div class="col-12">
            <!--<label class="form-label">상품 상태</label>
            <select name="isSoldout">
                <option value="">선택</option>
                <option value="SELL">판매중</option>
                <option value="SOLDOUT">품절</option>
            </select>-->
<!--            <label class="form-label" for="isSoldout">상품 상태</label><br/>-->
<!--            <input type="radio" name="isSoldout" id="isSoldout" value="0">판매중<br/>-->
<!--            <input type="radio" name="isSoldout" id="isSoldout" value="1">품절<br/>-->
<!--            <div class="invalid-feedback">-->
<!--                Input is empty.-->
<!--            </div>-->
        </div>

        <div class="col-12">
<!--            <label for="name" class="form-label">상품 이름</label>-->
<!--            <input type="text" class="form-control" id="name" name="name" placeholder="상품 이름을 입력하세요.">-->
<!--            <div class="invalid-feedback">-->
<!--                Your name is required.-->
<!--            </div>-->
        </div>

        <div class="col-12">
<!--            <label for="text" class="form-label">상품 설명</label>-->
<!--            <input type="text" class="form-control" name="text" id="text" placeholder="상품 설명을 입력하세요.">-->
<!--            <div class="invalid-feedback">-->
<!--                Input is empty.-->
<!--            </div>-->
        </div>

        <div class="col-12">
<!--            <label for="price" class="form-label">상품 가격</label>-->
<!--            <input type="text" class="form-control" id="price" name="price" placeholder="상품 가격을 입력하세요.">-->
<!--            <div class="invalid-feedback">-->
<!--                Input is empty.-->
<!--            </div>-->
        </div>

        <div class="col-12">
<!--            <label for="stock" class="form-label">상품 재고</label>-->
<!--            <input type="text" class="form-control" id="stock" name="stock"-->
<!--                   placeholder="상품 재고를 입력하세요.">-->
<!--            <div class="invalid-feedback">-->
<!--                Input is empty.-->
<!--            </div>-->
        </div>

        <div class="col-12">
            <label for="text" class="form-label">상품 이미지 업로드</label>
            <input type="file" class="form-control" id="imgFile" name="imgFile">
        </div>
    </div>
    <hr class="my-4">
    <button class="w-100 btn btn-primary btn-lg mb-3" type="submit">상품 등록</button>
</form>

<input type="file" id="image" accept="image/*" onchange="setThumbnail(event);" multiple/>
<div id="image_container"></div>




<section id="ex9">
    <style>
            #ex9 .upload-box{
                width:500px;
                height: 300px;
                border:1px solid gray;
                box-shadow: 2px 3px 9px hsl(0, 0%, 47%);
                padding:10px;
            }
        </style>
    <h1>파일업로드 : DND & Trigger</h1>
    <div class="upload-box">
        <button class="btn-upload">파일선택</button>
        <input class="btn-file d-none" type="file"> <!--파일 input box 형태-->
    </div>
</section>
<hr>

<style>
           .content{
    outline: 2px dashed #92b0b3 ;
    outline-offset:-10px;
    text-align: center;
    transition: all .15s ease-in-out;
    width: 300px;
    height: 300px;
    background-color: gray;
}
        </style>

<p>drag and drop your image!</p>
<div class="content">
    <button class="btn-upload">파일선택</button>
</div>
<p>drag and drop your image!</p>
<div class="content">
</div>
<p>drag and drop your image!</p>
<div class="content">
</div>
<p>drag and drop your image!</p>
<div class="content">
</div>
<p>drag and drop your image!</p>
<div class="content">
</div>


<script>
      function setThumbnail(event) {
        for (var image of event.target.files) {
          var reader = new FileReader();

          reader.onload = function(event) {
            var img = document.createElement("img");
            img.setAttribute("src", event.target.result);
            document.querySelector("div#image_container").appendChild(img);
          };

          console.log(image);
          reader.readAsDataURL(image);
        }
      }

      var sec9 = document.querySelector('#ex9');
    var btnUpload = sec9.querySelector('.btn-upload');
    var inputFile = sec9.querySelector('input[type="file"]');
    var uploadBox = sec9.querySelector('.upload-box');

    /* 박스 안에 Drag 들어왔을 때 */
    uploadBox.addEventListener('dragenter', function(e) {
        console.log('dragenter');
    });

    /* 박스 안에 Drag를 하고 있을 때 */
    uploadBox.addEventListener('dragover', function(e) {
        e.preventDefault();
        console.log('dragover');

        this.style.backgroundColor = 'green';
    });

    /* 박스 밖으로 Drag가 나갈 때 */
    uploadBox.addEventListener('dragleave', function(e) {
        console.log('dragleave');

        this.style.backgroundColor = 'white';
    });

    /* 박스 안에서 Drag를 Drop했을 때 */
    uploadBox.addEventListener('drop', function(e) {
        e.preventDefault();

        console.log('drop');
        this.style.backgroundColor = 'white';
    });

    $('.content')
  .on("dragover", dragOver)
  .on("dragleave", dragOver)
  .on("drop", uploadFiles);

function dragOver(e){
  e.stopPropagation();
  e.preventDefault();
}

function uploadFiles(e){
  e.stopPropagation();
  e.preventDefault();
}

function dragOver(e) {
    e.stopPropagation();
    e.preventDefault();
    if (e.type == "dragover") {
        $(e.target).css({
            "background-color": "black",
            "outline-offset": "-20px"
        });
    } else {
        $(e.target).css({
            "background-color": "gray",
            "outline-offset": "-10px"
        });
    }
}

/* 파일이 타겟에 떨어졌을 때 발생하는 이벤트다. */

function uploadFiles(e) {
    e.stopPropagation();
    e.preventDefault();
    dragOver(e);

    e.dataTransfer = e.originalEvent.dataTransfer;
    var files = e.target.files || e.dataTransfer.files;
    if (files.length > 1) {
        alert('하나만 올려라.');
        return;
    }
    if (files[0].type.match(/image.*/)) {
                $(e.target).css({
            "background-image": "url(" + window.URL.createObjectURL(files[0]) + ")",
            "outline": "none",
            "background-size": "100% 100%"
        });
    }else{
      alert('이미지가 아닙니다.');
      return;
    }
}

    </script>

</body>